(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[170],{6327:function(e,t,a){Promise.resolve().then(a.bind(a,15326))},85995:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var l=[{id:"demo",title:"Demo",businesses:[{id:"info",title:"Personal Info",desc:"Demo personal information table",schema:JSON.parse('{"type":"business","title":"个人基本信息","content":[{"type":"rows","content":[[{"value":"index.photo","form":{"name":"picture"},"style":{"position":"absolute","right":0,"height":"calc(var(--row-height) * 3)","width":"var(--label-width)"},"styles":{"label":{"display":"none"},"value":{"width":"100%","position":"absolute","right":0,"padding":"2px"}}}],[{"label":"姓名","value":"index.name","size":"half-xs"},{"label":"性别","value":"index.gender","size":"xs","form":{"mode":"pop","name":"radio"}},{"label":"出生年月","value":"index.birthdate","form":{"name":"date"},"size":"half-label"}],[{"label":"公民身份号码","value":"index.idNo"},{"label":"血型","value":"content.bloodType","form":{"mode":"pop","name":"radio","options":"血型"},"size":"half-label"}],[{"label":"医疗账号","value":""},{"label":"民族","value":"","form":{"name":"select"},"size":"half-label"}],[{"label":"证件类型","value":"","form":{"name":"select"}},{"label":"籍贯","value":"","form":{"name":"cascader"}}],[{"label":"证件编号","value":""},{"label":"出生地","value":"","form":{"name":"cascader"}}]]}]}')},{id:"landscape",title:"Landscape layout",desc:"Demo of Landscape layout",schema:JSON.parse('{"type":"business","title":"Landscape","content":[{"type":"rows","landscape":true,"border":false,"content":[{},{}]},{"type":"rows","content":[{},{}]}]}')},{id:"table",title:"Table View",desc:"Demo of Table",schema:JSON.parse('{"type":"business","title":"Table example","content":[{"type":"rows","content":[[{"type":"table","value":"a.b.c","header":[{"label":"外伤名称","value":"x","width":"52mm","form":{"name":"select","options":""}},{"label":"受伤时间","value":"y","width":"30.2mm","form":{"name":"date"}},{"label":"受伤部位","value":"z","width":"40mm"},{"label":"治疗机构","value":"hospital","width":"37mm"},{"label":"目前状况","value":"status","width":"30.2mm","form":{"name":"select","options":"","addonBefore":"前","addonAfter":"后"}}],"rowHeight":"7.8mm"}]]}]}')}]},{id:"med",title:"Medical Informatics Forms",businesses:[{id:"outpatient",title:"Outpatient",desc:"Outpatient form",schema:JSON.parse('{"type":"business","title":"门急诊摘要信息","content":[{"type":"rows","content":[[{"label":"姓名","value":"header.index.name","size":"half-xs"},{"label":"性别","value":"header.index.gender","size":"xs","form":{"mode":"pop","name":"radio","on":{"params":["header.index.idNo"],"fn":"function func(idNo) { if (idNo && idNo.length === 18) {return idNo.substr(16, 1) % 2 === 0 ? \'女\' : \'男\'} }"}}},{"label":"出生年月","value":"header.index.birthdate","form":{"name":"date","on":{"params":["header.index.idNo"],"fn":"function func(idNo) { if (idNo && idNo.length === 18) {return idNo.substr(6, 4) + \'-\' + idNo.substr(10, 2 ) + \'-\' + idNo.substr(12, 2)} }"}}}],[{"label":"公民身份号码","value":"header.index.idNo","size":"full"}],[{"label":"就诊日期","value":"content.summary.admittedAt","form":{"name":"date"}},{"label":"门诊分类","value":"content.summary.outpatientType","form":{"name":"radio"}}],[{"label":"就诊单位","value":"content.summary.admissionUnit"},{"label":"科室","value":"content.summary.department"}],[{"label":"接诊医生","value":"content.summary.admittingDoctor"},{"label":"就诊类型","value":"content.summary.firstOutpatientFlag","form":{"name":"radio"}}],[{"label":"主诉与症状","value":"content.reasonForEncounter.presentingProblem","form":{"name":"textarea"},"style":{"height":"20mm"},"size":"full"}],[{"label":"初步诊断","value":"content.diagnosis","form":{"name":"select","mode":"multiple","options":"门诊诊断"},"size":"full"}],[{"label":"处置措施","value":"content.treatment","form":{"name":"select","mode":"multiple","options":"处置措施"},"size":"full"}],[{"label":"用药记录","style":{"background":"#ddd"},"size":"full-label"}],[{"type":"table","value":"content.medications","minRows":4,"header":[{"label":"药物名称","value":"name","width":"70mm","form":{"name":"select","options":"门诊药物"}},{"label":"药物剂型","value":"form","width":"18mm"},{"label":"用药天数","value":"duration","width":"18mm"},{"label":"使用频率","value":"frequency","width":"18mm"},{"label":"次剂量","value":"dose","width":"18mm"},{"label":"总剂量","value":"total","width":"21.4mm"},{"label":"给药途径","value":"route","width":"26mm"}],"rowHeight":"7.8mm"}],[{"label":"手术记录","style":{"background":"#ddd"},"size":"full-label"}],[{"type":"table","value":"content.procedures","minRows":2,"header":[{"label":"手术名称","value":"operation","width":"124mm","form":{"name":"select","options":"门诊手术"}},{"label":"手术日期","value":"performedAt","width":"65.4mm","form":{"name":"date"}}],"rowHeight":"7.8mm"}],[{"label":"检验项目名称","value":"content.tests.subject","form":{"name":"select","options":"门诊检验"},"size":"full"}],[{"type":"table","value":"content.tests.results","minRows":3,"header":[{"label":"检验指标","value":"item","width":"70mm","form":{"name":"select","options":"门诊检验项目"}},{"label":"检测值","value":"result","width":"36mm"},{"label":"参考值范围","value":"range","width":"57.4mm"},{"label":"异常标志","value":"abnormalFlag","width":"26mm","form":{"name":"radio","mode":"pop","options":"正常异常"}}],"rowHeight":"7.8mm"}],[{"label":"转归","value":"content.summary.outcome.type","form":{"name":"select","options":"门诊转归"},"size":"full"}],[{"label":"责任医师","value":"content.summary.outcome.doctor","size":"full"}]]}]}')}]}]},15326:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return page}});var l=a(57437),s=a(2265),n=a(61396),o=a.n(n),i=a(88110),r=a.n(i),d=a(63477),m=a(67848),c=a(33116),u=a(16405),f=a(88613);let delay=e=>new Promise(t=>setTimeout(t,e)),print=()=>{window.print()},getDataFromLS=e=>{let t=localStorage.getItem(e);return JSON.parse(t||"{}")},saveDataToLS=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},deleteFromLS=e=>{localStorage.removeItem(e)},download=async(e,t)=>{if(e.current){await e.current.click(),await delay(1e3);let a=new Date().toISOString().replace(":","")+".json",l=JSON.stringify(t,void 0,2),s=new Blob([l],{type:"text/plain;charset=utf-8"});(0,f.saveAs)(s,a)}};var h=a(85995),p=a(60664),devside=e=>{let{side:t,content:a}=e;return(0,l.jsxs)("div",{className:"w-full h-full flex mt-4 overflow-y-auto",children:["schema"===t&&(0,l.jsx)(p.Z,{lang:"json",code:a}),"model"===t&&(0,l.jsx)(p.Z,{lang:"json",code:'{"name": "model"}'}),"options"===t&&(0,l.jsx)(p.Z,{lang:"json",code:"{name: Options}"}),"functions"===t&&(0,l.jsx)(p.Z,{lang:"json",code:"{name: Functions}"})]})},x=a(99543),v=a(24033),page=()=>{var e,t;let a=(0,v.useSearchParams)(),n=null===(e=a.getAll("id"))||void 0===e?void 0:e[0],o=null!==(t=null==n?void 0:n.split("@"))&&void 0!==t?t:[],[i,r]=o,d="data.".concat(i),[m,c]=(0,s.useState)(b[0].value),[u,f]=(0,s.useState)(getDataFromLS(d)),[p,w]=(0,s.useState)(!1),[g,j]=(0,s.useState)("schema"),[y,N]=(0,s.useState)(Date.now()),[S,k]=(0,s.useState)(),L=(0,s.useRef)(null);return(0,s.useEffect)(()=>{f(getDataFromLS(d)),N(Date.now())},[p,d]),(0,s.useEffect)(()=>{var e;let t=null===(e=h.Z.find(e=>e.id===r))||void 0===e?void 0:e.businesses.find(e=>e.id===i);t&&t.schema&&k(t.schema)},[i,r]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.Z,{logo:"/xrender.png",name:"XRender"}),(0,l.jsx)("div",{className:"h-12"}),(0,l.jsxs)("div",{className:"fixed top-12 w-full flex flex-row px-12 py-10 z-20 h-16 bg-white items-center justify-between",children:[(0,l.jsx)(ControlButtons,{dataId:d,mode:m,setMode:c,setData:f}),(0,l.jsxs)("div",{children:["form"===m&&(0,l.jsx)(FormButtons,{saveRef:L,dataId:d,data:u,setReloading:w}),"print"===m&&(0,l.jsx)(PrintButtons,{}),"dev"===m&&(0,l.jsx)(DevButtons,{side:g,setSide:j})]})]}),(0,l.jsx)("div",{className:"w-full pt-16 z-10",style:{height:"calc(100vh - 64px)"},children:"dev"===m?(0,l.jsxs)("div",{className:"h-full flex flex-row justify-between",children:[(0,l.jsx)("div",{className:"flex-grow h-full flex flex-col p-8 overflow-y-auto",children:(0,l.jsx)(Body,{mode:m,formKey:y,schema:S,dataId:d,data:u,setData:f})}),(0,l.jsx)("div",{className:"max-w-[768px] min-w-[640px] h-full px-4",children:(0,l.jsx)(devside,{side:g,content:JSON.stringify(S,null,2)})})]}):(0,l.jsx)("div",{className:"p-8",children:(0,l.jsx)(Body,{mode:m,formKey:y,schema:S,dataId:d,data:u,setData:f})})})]})};let Body=e=>{let{mode:t,formKey:a,schema:s,dataId:n,data:o,setData:i}=e,r=(0,l.jsx)(l.Fragment,{});switch(t){case"form":r=(0,l.jsx)(u.bk,{schema:s,formId:"form",mode:"form",data:o,onSubmit:e=>{saveDataToLS(n,e),i(e),c.ZP.success("保存成功")}},a);break;case"print":r=(0,l.jsx)(u.bk,{schema:s,data:o,mode:"print"});break;case"dev":r=(0,l.jsx)(u.bk,{schema:s,data:o,formId:"dev",mode:"dev"});break;default:r=(0,l.jsx)("div",{className:"sheets-container",children:(0,l.jsx)(u.bk,{schema:s,data:o})})}return r},ControlButtons=e=>{let{dataId:t,mode:a,setMode:s,setData:n}=e;return(0,l.jsxs)("div",{className:"flex flex-row space-x-10",children:[(0,l.jsx)(o(),{href:"/xrender/schemas",children:(0,l.jsx)(r(),{children:" 返回"})}),(0,l.jsx)(m.ZP.Group,{options:b,optionType:"button",buttonStyle:"solid",value:a,onChange:e=>{s(e.target.value),n(getDataFromLS(t))}})]})},FormButtons=e=>{let{saveRef:t,dataId:a,data:s,setReloading:n}=e;return(0,l.jsxs)("div",{className:"space-x-4",children:[(0,l.jsx)(r(),{className:"bg-blue-500",ref:t,type:"primary",htmlType:"submit",form:"form",children:"暂存"}),(0,l.jsx)(d.Z,{title:"确定删除数据？",onConfirm:()=>{deleteFromLS(a),n(!0)},children:(0,l.jsx)(r(),{type:"primary",danger:!0,children:"重置"})}),(0,l.jsx)(r(),{onClick:()=>{download(t,s)},children:"下载"})]})},PrintButtons=()=>(0,l.jsx)(r(),{type:"dashed",onClick:print,children:"打印"}),DevButtons=e=>{let{side:t,setSide:a}=e;return(0,l.jsx)(m.ZP.Group,{options:w,optionType:"button",buttonStyle:"solid",value:t,onChange:e=>{a(e.target.value)}})},b=[{label:"表单",value:"form"},{label:"打印",value:"print"},{label:"设计",value:"dev"}],w=[{label:"Schema",value:"schema"},{label:"Model",value:"model"},{label:"Options",value:"options"},{label:"Functions",value:"functions"}]},99543:function(e,t,a){"use strict";var l=a(57437),s=a(16691),n=a.n(s),o=a(24860);t.Z=e=>{let{logo:t,name:a}=e;return(0,l.jsxs)("div",{className:"fixed z-50 w-full flex items-center justify-between h-12 shadow-md bg-white",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center space-x-10 ml-6",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center space-x-2",children:[t&&(0,l.jsx)(n(),{src:t,alt:"SQLGen",width:"24",height:"24"}),(0,l.jsx)("span",{children:a})]}),(0,l.jsx)("div",{className:"flex flex-row items-center space-x-4"})]}),(0,l.jsxs)("div",{className:"flex flex-row items-center space-x-2 mr-6",children:[(0,l.jsx)(o.Z,{name:"download"}),(0,l.jsx)(o.Z,{name:"settings"})]})]})}},60664:function(e,t,a){"use strict";var l=a(57437),s=a(2265),n=a(93152),o=a(86517),i=a(84042),r=a(24860);a(82995),n.Z.registerLanguage("sql",i.Z),n.Z.registerLanguage("json",o.Z),t.Z=e=>{let{lang:t,code:a}=e,o=(0,s.useRef)(null);return(0,s.useEffect)(()=>{o.current&&n.Z.highlightBlock(o.current)},[a]),(0,l.jsxs)("div",{className:"relative w-full h-full rounded-md pb-4",children:[(0,l.jsxs)("div",{className:"absolute w-full flex flex-row items-center justify-between rounded-t-md text-xs text-gray-200 bg-gray-800 px-4 py-2",children:[(0,l.jsx)("div",{className:"",children:t}),(0,l.jsxs)("button",{className:"flex flex-row space-x-1 rounded-md px-2",onClick:()=>{let e=o.current;if(e){let t=document.createRange();t.selectNodeContents(e);let a=window.getSelection();null==a||a.removeAllRanges(),null==a||a.addRange(t),document.execCommand("copy")}},children:[(0,l.jsx)(r.Z,{name:"copy"})," ",(0,l.jsx)("span",{children:"Copy code"})]})]}),(0,l.jsx)("pre",{className:"h-full w-full pt-8 overflow-auto rounded-md",children:(0,l.jsx)("code",{ref:o,className:"h-full rounded-b-md ".concat(t),children:a})})]})}},24860:function(e,t,a){"use strict";a.d(t,{Z:function(){return icon}});var l=a(57437);let s=(0,l.jsx)("path",{d:"M19.8 4.2a1 1 0 1 0-1.4-1.4L12 10.6 5.6 4.2a1 1 0 1 0-1.4 1.4L10.6 12l-6.4 6.4a1 1 0 1 0 1.4 1.4L12 13.4l6.4 6.4a1 1 0 1 0 1.4-1.4L13.4 12l6.4-6.4z"}),n=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),(0,l.jsx)("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),o=(0,l.jsx)("path",{d:"M14.7928932,11.5 L11.6464466,8.35355339 C11.4511845,8.15829124 11.4511845,7.84170876 11.6464466,7.64644661 C11.8417088,7.45118446 12.1582912,7.45118446 12.3535534,7.64644661 L16.3535534,11.6464466 C16.5488155,11.8417088 16.5488155,12.1582912 16.3535534,12.3535534 L12.3535534,16.3535534 C12.1582912,16.5488155 11.8417088,16.5488155 11.6464466,16.3535534 C11.4511845,16.1582912 11.4511845,15.8417088 11.6464466,15.6464466 L14.7928932,12.5 L4,12.5 C3.72385763,12.5 3.5,12.2761424 3.5,12 C3.5,11.7238576 3.72385763,11.5 4,11.5 L14.7928932,11.5 Z M16,4.5 C15.7238576,4.5 15.5,4.27614237 15.5,4 C15.5,3.72385763 15.7238576,3.5 16,3.5 L19,3.5 C20.3807119,3.5 21.5,4.61928813 21.5,6 L21.5,18 C21.5,19.3807119 20.3807119,20.5 19,20.5 L16,20.5 C15.7238576,20.5 15.5,20.2761424 15.5,20 C15.5,19.7238576 15.7238576,19.5 16,19.5 L19,19.5 C19.8284271,19.5 20.5,18.8284271 20.5,18 L20.5,6 C20.5,5.17157288 19.8284271,4.5 19,4.5 L16,4.5 Z",transform:"rotate(90 12.5 12)"}),i=(0,l.jsx)("path",{d:"M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"}),r=(0,l.jsx)("path",{d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"});var d={close:{viewBox:"0 0 24 24",scale:.8,path:s,fill:!0,stroke:2},copy:{viewBox:"0 0 24 24",scale:.8,path:n,fill:!1,stroke:2},download:{viewBox:"0 0 24 24",scale:.9,path:o,fill:!0,stroke:.8},settings:{viewBox:"0 0 16 16",scale:.8,path:i,fill:!1,stroke:!0},upload:{viewBox:"0 0 24 24",scale:.9,path:r,fill:!1,stroke:2}},icon=e=>{let{name:t,size:a=20,color:s,onClick:n}=e,o=d[t]||{},i=o.scale||1;return(0,l.jsx)("div",{style:{color:s},onClick:n,children:(0,l.jsx)("svg",{width:a*i,height:a*i,strokeWidth:o.stroke&&0!==o.stroke?"".concat(o.stroke):"1.5",stroke:!1===o.stroke||0===o.stroke?"transparent":"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:o.fill?"currentColor":"transparent",viewBox:o.viewBox||"0 0 32 32",children:o.path})})}}},function(e){e.O(0,[866,326,986,696,843,971,472,744],function(){return e(e.s=6327)}),_N_E=e.O()}]);